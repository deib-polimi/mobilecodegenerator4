//
//  MenuPresentationAnimator.swift
//  MenuPresentationAnimator
//
//  Automatically generated by MobileCodeGenerator 4.
//  Copyright 2018 . All rights reserved.
//

import UIKit

final class MenuPresentationAnimator: NSObject {

	// MARK: - Properties
	let isPresentation: Bool

	// MARK: - Initializers
	init(isPresentation: Bool) {
		self.isPresentation = isPresentation
		super.init()
	}
}

// MARK: - UIViewControllerAnimatedTransitioning
extension MenuPresentationAnimator: UIViewControllerAnimatedTransitioning {
  
	func transitionDuration(using transitionContext: UIViewControllerContextTransitioning?) -> TimeInterval {
		return 0.2
	}
  
	func animateTransition(using transitionContext: UIViewControllerContextTransitioning) {
		let key = isPresentation ? UITransitionContextViewControllerKey.to : UITransitionContextViewControllerKey.from
		let controller = transitionContext.viewController(forKey: key)!
    
		if isPresentation {
			transitionContext.containerView.addSubview(controller.view)
		}

		let presentedFrame = transitionContext.finalFrame(for: controller)
		var dismissedFrame = presentedFrame
		dismissedFrame.origin.x = -presentedFrame.width

		let initialFrame = isPresentation ? dismissedFrame : presentedFrame
		let finalFrame = isPresentation ? presentedFrame : dismissedFrame

		let animationDuration = transitionDuration(using: transitionContext)
		controller.view.frame = initialFrame
		UIView.animate(withDuration: animationDuration, animations: {
			controller.view.frame = finalFrame
		}) { finished in
			transitionContext.completeTransition(finished)
		}
	}
}

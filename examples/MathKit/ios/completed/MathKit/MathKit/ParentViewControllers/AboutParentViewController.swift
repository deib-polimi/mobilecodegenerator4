//
//  AboutParentViewController.swift
//  About
//
//  Automatically generated by MobileCodeGenerator 4.
//  Copyright 2018 . All rights reserved.
//

import UIKit

class AboutParentViewController: UIViewController {
    
    // MARK: Properties
	fileprivate let infoVC: UIViewController
    lazy var menuTransitioningDelegate = MenuPresentationManager()
    
    
    // MARK: Initialization
    init() {
        let storyboard = UIStoryboard(name: "Main", bundle: nil)
		infoVC = storyboard.instantiateViewController(withIdentifier: "InfoViewControllerStoryboardID")
        super.init(nibName: nil, bundle: nil)
    }
    
    required init?(coder aDecoder: NSCoder) {
        let storyboard = UIStoryboard(name: "Main", bundle: nil)
		infoVC = storyboard.instantiateViewController(withIdentifier: "InfoViewControllerStoryboardID")
        super.init(coder: aDecoder)
    }
    
    // MARK: UIViewController
    override func viewDidLoad() {
        super.viewDidLoad()
        
        // Setup menu button into navigation bar
	    let menuIcon = UIImage(named: "menu_icon")
	    navigationItem.leftBarButtonItem = UIBarButtonItem(image: menuIcon, style: .plain, target: self, action: #selector(showMenu))
	    
        
        setupUI()
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    
    func showMenu() {
    	let storyboard = UIStoryboard(name: "Main", bundle: nil)
		let menuViewController = storyboard.instantiateViewController(withIdentifier: "MenuViewControllerStoryboardID") as! MenuViewController
		menuViewController.delegate = self
		menuViewController.transitioningDelegate = menuTransitioningDelegate
		menuViewController.modalPresentationStyle = .custom
		present(menuViewController, animated: true, completion: nil)
	}
    
    
    // MARK: UI Setup
    private func setupUI() {
		view.backgroundColor = UIColor(displayP3Red: 1, green: 1, blue: 1, alpha: 1)
		addChildViewController(infoVC)
		infoVC.didMove(toParentViewController: self)
		infoVC.view.translatesAutoresizingMaskIntoConstraints = false
    	showInfoVC()
    }
    
    // MARK: functions that show each child view controller for singleVC/singleVCTab type scenes
	fileprivate func showInfoVC() {
		if view.subviews.count > 0 {
			view.subviews[0].removeFromSuperview()
		}
	
		let infoView = infoVC.view!
        view.addSubview(infoView)
            
		NSLayoutConstraint.activate([
	            infoView.bottomAnchor.constraint(equalTo: view.bottomAnchor),
	            infoView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
	            infoView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
	            infoView.topAnchor.constraint(equalTo: view.topAnchor)
            	])
	}
    
}

// MARK: MenuViewControllerDelegate
extension AboutParentViewController: MenuViewControllerDelegate {
	func menuViewController(controller: MenuViewController, didSelectItem selectedItem: MenuItem) {
		var selectedViewController: UIViewController?
		switch selectedItem.destinationID {
    	case "Algebra":
    		selectedViewController = AlgebraParentViewController()
    	case "Equations":
    		selectedViewController = EquationsParentViewController()
    	case "Guide":
    		selectedViewController = GuideParentViewController()
    	case "About":
    		selectedViewController = AboutParentViewController()
    	default:
    		break
		}
		// Dismiss MenuViewController
		dismiss(animated: true)
		if selectedViewController != nil {
			navigationController!.viewControllers.append(selectedViewController!)
			navigationController!.viewControllers.removeFirst()
		}
	}
}


